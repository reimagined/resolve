// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`local config works correctly [server] 1`] = `
"

    import '$resolve.guardOnlyServer'
    import createStorageAdapter from '$resolve.storageAdapter'
    import eventBrokerConfig from '$resolve.eventBroker'
    import { createAndRunLocalBusBroker } from 'resolve-local-event-broker'

    if(module.parent != null) {
      setImmediate(() => process.exit(1))
      throw new Error('Event broker should be launched as independent process')
    }

    (async () => {
      try {
        const stopBroker = await createAndRunLocalBusBroker({
          ...eventBrokerConfig
        })

        process.on('exit', stopBroker)
      } catch(error) {
        console.error('Event broker has run into an error:', error)

        process.exit(1)
      }
    })()
  
"
`;
